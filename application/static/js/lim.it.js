  /*---------------------------------------------------------------------

  Template Name:  lim.it
  Version:        1.0
  Release Date:   July 12, 2010

  File:           lim.it.js
  Updated:        2010-07-12

  Copyright (c) 2010 Chanry Ian - http://wcweb.us

  -----------------------------------------------------------------------

  WARNING! DO NOT EDIT THIS FILE UNLESS YOU KNOW WHAT YOU ARE DOING!

  ---------------------------------------------------------------------*/
  // globle use

  // sometime you can preload some images
  // imageObj = new Image();
  // imgs = ["/static/style/img/toggle.gif", "/static/style/img/nyro/ajaxLoader.gif", "/static/style/img/nyro/prev.gif", "/static/style/img/nyro/next.gif"];
  // for (i = 0; i <= imgs.length; i++) imageObj.src = imgs[i];

  // lim object setup




  var Limit = {};

  Limit.scrollToTop = function(e){
    $(e).hide().removeAttr("href");
    if ($(window).scrollTop() !== 0) {
      $(e).fadeIn("slow");
    }
    var scrollDiv = $(e);
    $(window).scroll(function () {
      if ($(window).scrollTop() === 0) {
        $(scrollDiv).fadeOut("slow");
      } else {
        $(scrollDiv).fadeIn("slow");
      }
    });
    $(e).click(function () {
      $("html, body").animate({
        scrollTop: 0
      }, "slow");
    });
  };

  Limit.setup = function () {
  // Open external link in new windows
  $('a[href^="http://"]').filter(function () {
    return this.hostname && this.hostname !== location.hostname;
  }).attr('target', '_blank');

        // scroll to top on request
        if ($("a#totop").length) {
          Limit.scrollToTop("a#totop");
        }
    // setup content boxes
    if ($(".content-box").length) {
      $(".content-box .head").css({
        "cursor": "s-resize"
      });
      $(".content-box .body").slideUp();

        // Give the header in content-box a different cursor
        $(".content-box .head").toggle(
          function () {
            var that=this;
            $(this).parent().find('.body').slideDown('slow',function(){
              $(that).children().find('.caption').toggleClass("content-box-closed");
            }); // Toggle the content

          },function(){
            var that=this;
            $(this).parent().find('.body').slideUp('slow',function(){
              console.log($(that));
              $(that).children().find('.caption').toggleClass("content-box-closed");
            }); // Toggle the content

          });
      }


    // custom tooltips to replace the default browser tooltips for <a title=""> <div title=""> and <span title="">
    // $("a[title], div[title], span[title]").tipTip();
    if($('.dropdown-toggle').length){
      $('.dropdown-toggle').dropdown();
    }
  // if($(".collapse").length){\

  //     $(".collapse").collapse();\

  // }\

  if($('#myModal').length){
    $('#myModal').modal('hide');
  }

};

Limit.setup();

$(function(){
 if($.jqplot!==undefined){
  $.jqplot.config.enablePlugins = true;
  var ss1 = [[0, 5],[5,5],[5,10],[10,10],[10,15],[15,15],[15,20],[20,20]];
  var ss2 =  [[5, 0],[5,5],[15,5],[15,15],[20,15],[20,20]];
  if($('#chart2').length){
    $.jqplot('chart2',  [ss1],
      { title:'课堂行为分析图',
      axesDefaults:{
        min:0,
        max:60,
        pad:1,
        autoscale:true
      },
      axes:{
        xaxis:{
          tickInterval:5,
          autoscale:false
        },
        yaxis:{
         tickInterval:5,
         autoscale:false
       }
     },
     tickInterval:5,
     numberTicks:6,
     legend:{
      show:true,
      rendererOptions:{placement: "insideGrid"},
      location:'se'},
      series:[
      {
        showLabel:true,
        label:'标准组',
        color:'#5FAB78'
      },
      {
        showLabel:true,
        label:'测试组',
        color:'#d8b83f'
      }
      ],
      cursor:{
        show:true
      }
    });
  }
  

}

});

$(function(){
  if($("#datepicker").length){
    $("#datepicker").datepicker(
      {dayNamesMin:['日','一','二','三','四','五','六']}
      );
    //getter
    var monthNames = $( "#datepicker" ).datepicker( "option", "monthNames" );
//setter
$( "#datepicker" ).datepicker( "option", "monthNames", ["一月","二月","三月","四月","五月","六月","七月","八月",'九月',"十月","十一月","十二月"] );
}

});



$(function(){
  $('.toggle-info').slideUp('fast');
  $('.toggle-info-btn').toggle(
    function(){
      var that=this;

      $("#"+$(this).attr('rel')).slideDown(
        'slow',function(){
          $(that).children().html('隐藏信息');
        }

        );
    },
    function(){
      var that=this;
      $("#"+$(this).attr('rel')).slideUp(
        'fast',function(){
          $(that).children().html('显示信息');
        });
    });
});



$(window).load(function() {
  if($.fn.nivoSlider){
    $('#slider').nivoSlider(
      {slideInRight:'left',
      controlNavThumbs: true,
      effect: 'random',
      beforeChange:function(){
        var vars = $('#slider').data("nivo:vars"),
        currentNavEl = vars.controlNavEl,
        currentSlide = vars.currentSlide,
        totalSlides = vars.totalSlides,
        st;
        if(currentSlide === vars.totalSlides-1){
          st = 0;
        }else{
          var nextSlide = vars.currentSlide;
          st =  -currentNavEl.children().filter('.active').height()*(nextSlide);
        }
        currentNavEl.animate({top: st},1500);
      }}
      );
  }
});

var commentInit=0;

$(function(){
  if($(".hidden_first").length>0){
    $(".hidden_first").hide();
  }
});


$(function(){

    if(commentInit == 0){
      $("#commentPlayer").focus( function(evt){
        if($('#mediaPlayer').length>0){
          var currentPosition = jwplayer('mediaPlayer').getPosition();
          console.log("currentPosition :"+currentPosition);
          commentInit = 1;
        }
      });
    }else{

    }
    
});




